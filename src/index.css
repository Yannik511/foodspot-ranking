@tailwind base;
@tailwind components;
@tailwind utilities;

/* FriendlyDarkModeTierLayout - Global Theme System */
:root {
  /* Light Mode (Default) */
  --surfaceApp: #F7F8FA;
  --surfaceCard: #141518;
  --surfaceMuted: #E5E7EB;
  --onSurface: #FFFFFF;
  --onSurfaceMuted: rgba(255, 255, 255, 0.7);
  --divider: rgba(255, 255, 255, 0.08);
  --accentPrimary: #FF9500;
  
  /* Tier Colors - Light Mode */
  --tier-s: #FF3B30;
  --tier-a: #FF9500;
  --tier-b: #FFD60A;
  --tier-c: #34C759;
  --tier-d: #007AFF;
}

/* Dark Mode (Prepared but not active yet) */
@media (prefers-color-scheme: dark) {
  .dark-mode-enabled:root {
    --surfaceApp: #0B0C0F;
    --surfaceCard: #1A1C20;
    --surfaceMuted: #2A2C30;
    --onSurface: #ECEFF4;
    --onSurfaceMuted: rgba(236, 239, 244, 0.7);
    --divider: rgba(236, 239, 244, 0.08);
    --accentPrimary: #FF9500;
    
    /* Tier Colors - Dark Mode (slightly desaturated) */
    --tier-s: #E63946;
    --tier-a: #F77F00;
    --tier-b: #F4D35E;
    --tier-c: #52B788;
    --tier-d: #4CC9F0;
  }
}

/* Manual Dark Mode toggle (for future use) */
[data-theme="dark"] {
  --surfaceApp: #0B0C0F;
  --surfaceCard: #1A1C20;
  --surfaceMuted: #2A2C30;
  --onSurface: #ECEFF4;
  --onSurfaceMuted: rgba(236, 239, 244, 0.7);
  --divider: rgba(236, 239, 244, 0.08);
  --accentPrimary: #FF9500;
  
  /* Tier Colors - Dark Mode */
  --tier-s: #E63946;
  --tier-a: #F77F00;
  --tier-b: #F4D35E;
  --tier-c: #52B788;
  --tier-d: #4CC9F0;
}

@layer base {
  * {
    @apply antialiased;
    -webkit-tap-highlight-color: transparent;
  }
  
  html {
    scroll-behavior: smooth;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    background-color: #FFFFFF;
    height: 100%;
    height: 100dvh; /* Modern browsers */
  }
  
  body {
    --safe-area-bg-current: #FFFFFF;
    @apply text-gray-900 m-0;
    font-family: 'Poppins', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;
    overscroll-behavior-y: none;
    overscroll-behavior-x: none;
    -webkit-overflow-scrolling: touch;
    height: 100dvh;
    height: 100vh; /* Fallback for browsers that don't support dvh */
    background: #FFFFFF;
    overflow: hidden; /* Prevent body scroll, only content areas scroll */
  }

  body::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    height: env(safe-area-inset-top, 0px);
    background: transparent;
    z-index: 1; /* Sehr niedrig, damit Content und Header darüber sind */
    pointer-events: none;
    /* Vollständig transparent für transparentes Scrolling unter Header bis in Safe Area */
    opacity: 0;
    /* Sicherstellen, dass es wirklich transparent ist */
    background-color: transparent !important;
  }

  /* WICHTIG: Verhindert body::before auf Landing-Page - verhindert Race-Condition */
  body[data-page="landing"]::before {
    display: none !important;
    content: none !important;
    height: 0 !important;
    width: 0 !important;
    opacity: 0 !important;
    visibility: hidden !important;
  }

  /* Landing-Page: Transparenter Background */
  body[data-page="landing"] {
    background: transparent !important;
    background-color: transparent !important;
    --safe-area-bg-current: transparent !important;
  }
  
  .dark body::before {
    background: transparent;
    opacity: 0;
    background-color: transparent !important;
  }

  #root {
    height: 100dvh;
    height: -webkit-fill-available; /* iOS Safari Fallback - wichtig für PWA */
    height: 100vh; /* Fallback for browsers that don't support dvh */
    min-height: 100dvh;
    min-height: -webkit-fill-available; /* iOS Safari Fallback */
    min-height: 100vh; /* Fallback */
    overflow: hidden;
    display: flex;
    flex-direction: column;
    position: relative;
  }

  /* Native-like scroll behavior */
  * {
    scroll-behavior: smooth;
  }

  /* Improve touch targets */
  button, a, [role="button"] {
    min-height: 44px;
    min-width: 44px;
  }

  /* Smooth transitions for color changes (dark mode) */
  * {
    transition: background-color 0.2s ease, color 0.2s ease, border-color 0.2s ease;
  }
}

.dark html {
  background-color: #0f172a;
}

.dark body {
  --safe-area-bg-current: #111827;
  background: #111827;
  color: #F8FAFC;
}

@layer components {
  .header-safe {
    padding-top: calc(env(safe-area-inset-top, 0px) + 12px);
    padding-bottom: 12px;
    min-height: calc(60px + env(safe-area-inset-top, 0px));
  }

  /* Landing Page: Full-Screen Container für iOS PWA Safe-Area Support */
  .landing-fullscreen-container {
    height: 100dvh;
    height: -webkit-fill-available; /* iOS Safari Fallback - wichtig für PWA */
    height: 100vh; /* Fallback for browsers that don't support dvh */
  }

  /* Einheitlicher Content-Bereich für alle Pages */
  /* Füllt verfügbaren Platz zwischen Header und Footer */
  /* Scrollbar bei viel Content, füllt Platz bei wenig Content */
  .page-content {
    flex: 1;
    overflow-y: auto;
    min-height: 0; /* Wichtig für Flexbox overflow */
    -webkit-overflow-scrolling: touch;
    overscroll-behavior: none;
  }

  .pressable {
    transition: transform 0.16s cubic-bezier(0.2, 0.65, 0.25, 1), opacity 0.15s ease;
  }

  .pressable:active {
    transform: scale(0.97);
  }
}

@layer utilities {
  .bg-gradient-radial {
    background: radial-gradient(circle at center, var(--tw-gradient-stops));
  }

}

/* Global Animations */
@keyframes fadeSlideUp {
  from { 
    opacity: 0; 
    transform: translateY(20px); 
  }
  to { 
    opacity: 1; 
    transform: translateY(0); 
  }
}

@keyframes fadeSlideDown {
  from { 
    opacity: 0; 
    transform: translate(-50%, -20px); 
  }
  to { 
    opacity: 1; 
    transform: translate(-50%, 0); 
  }
}

@keyframes scaleIn {
  from { 
    opacity: 0; 
    transform: scale(0.9); 
  }
  to { 
    opacity: 1; 
    transform: scale(1); 
  }
}

@keyframes fadeIn {
  from { 
    opacity: 0; 
  }
  to { 
    opacity: 1; 
  }
}

/* Smooth backdrop blur for modals */
.backdrop-blur-sm {
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
}

.backdrop-blur-md {
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
}

.backdrop-blur-lg {
  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px);
}
